{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<template>\n  <view class=\"app\">\n    <!-- 应用主容器 -->\n  </view>\n</template>\n\n<script setup>\nimport { onLaunch, onShow, onHide } from '@dcloudio/uni-app'\n\n// 应用启动\nonLaunch(() => {\n  console.log('App Launch')\n  // 检查登录状态\n  checkLoginStatus()\n})\n\n// 应用显示（从后台进入前台）\nonShow(() => {\n  console.log('App Show')\n  // 每次显示时都检查登录状态\n  checkLoginStatus()\n})\n\n// 应用隐藏\nonHide(() => {\n  console.log('App Hide')\n})\n\n/**\n * 检查登录状态\n */\nfunction checkLoginStatus() {\n  const token = uni.getStorageSync('token')\n  const userInfo = uni.getStorageSync('userInfo')\n  \n  // 如果没有token或用户信息，显示登录提示弹窗\n  if (!token || !userInfo) {\n    console.log('用户未登录，显示登录提示')\n    // 延迟显示，确保页面加载完成\n    setTimeout(() => {\n      uni.showModal({\n        title: '提示',\n        content: '您还未登录，是否立即登录？',\n        confirmText: '立即登录',\n        cancelText: '取消',\n        success: (res) => {\n          if (res.confirm) {\n            // 用户点击确定，触发登录事件\n            // 通过事件通知钓点列表页面触发登录\n            uni.$emit('triggerLogin')\n          } else {\n            // 用户点击取消，退出小程序\n            uni.showToast({\n              title: '需要登录才能使用',\n              icon: 'none'\n            })\n          }\n        }\n      })\n    }, 500)\n  } else {\n    console.log('用户已登录')\n  }\n}\n\n// 非微信小程序环境的处理函数\nfunction handleLogin() {\n  // 调用微信登录\n  uni.login({\n    provider: 'weixin',\n    success: (loginRes) => {\n      console.log('登录成功，code:', loginRes.code)\n      \n      // #ifndef MP-WEIXIN\n      // 非微信小程序环境的处理\n      const mockToken = 'mock_token_' + Date.now()\n      const userInfo = {\n        avatar: 'http://p3.diaoyur.cn/group3/M00/0B/4C/cjd0iVhwYF-xmeuqfNBk9gLpv4atJ.jpeg',\n        nickname: '游客用户',\n        phone: ''\n      }\n      \n      uni.setStorageSync('token', mockToken)\n      uni.setStorageSync('userInfo', userInfo)\n      \n      uni.showToast({\n        title: '登录成功',\n        icon: 'success'\n      })\n      \n      setTimeout(() => {\n        uni.switchTab({\n          url: '/pages/my/my'\n        })\n      }, 1500)\n      // #endif\n    },\n    fail: (err) => {\n      console.error('登录失败:', err)\n      uni.showToast({\n        title: '登录失败',\n        icon: 'none'\n      })\n      // 登录失败，退出小程序\n      setTimeout(() => {\n        uni.exitMiniProgram()\n      }, 1500)\n    }\n  })\n}\n</script>\n\n<style>\n/* 全局样式 */\n@import './static/styles/common.css';\n\n/* 重置默认样式 */\npage {\n  background-color: #f5f5f5;\n  font-size: 28rpx;\n  color: #333;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\n\n/* 清除按钮默认样式 */\nbutton::after {\n  border: none;\n}\n\n/* 图片默认样式 */\nimage {\n  display: block;\n}\n</style>","import App from './App.vue'\n\n// #ifndef VUE3\nimport Vue from 'vue'\nimport './uni.promisify.adaptor'\nVue.config.productionTip = false\nApp.mpType = 'app'\nconst app = new Vue({\n  ...App\n})\napp.$mount()\n// #endif\n\n// #ifdef VUE3\nimport { createSSRApp } from 'vue'\nexport function createApp() {\n  const app = createSSRApp(App)\n  return {\n    app\n  }\n}\n// #endif\n"],"names":["onLaunch","uni","onShow","onHide","createSSRApp","App"],"mappings":";;;;;;;;;;;;;AAUAA,kBAAAA,SAAS,MAAM;AACbC,oBAAAA,MAAA,MAAA,OAAA,iBAAY,YAAY;AAExB,uBAAkB;AAAA,IACpB,CAAC;AAGDC,kBAAAA,OAAO,MAAM;AACXD,oBAAAA,MAAA,MAAA,OAAA,iBAAY,UAAU;AAEtB,uBAAkB;AAAA,IACpB,CAAC;AAGDE,kBAAAA,OAAO,MAAM;AACXF,oBAAAA,MAAA,MAAA,OAAA,iBAAY,UAAU;AAAA,IACxB,CAAC;AAKD,aAAS,mBAAmB;AAC1B,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxC,YAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAG9C,UAAI,CAAC,SAAS,CAAC,UAAU;AACvBA,sBAAAA,oCAAY,cAAc;AAE1B,mBAAW,MAAM;AACfA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,SAAS;AAAA,YACT,aAAa;AAAA,YACb,YAAY;AAAA,YACZ,SAAS,CAAC,QAAQ;AAChB,kBAAI,IAAI,SAAS;AAGfA,8BAAG,MAAC,MAAM,cAAc;AAAA,cACpC,OAAiB;AAELA,8BAAAA,MAAI,UAAU;AAAA,kBACZ,OAAO;AAAA,kBACP,MAAM;AAAA,gBACpB,CAAa;AAAA,cACF;AAAA,YACF;AAAA,UACT,CAAO;AAAA,QACF,GAAE,GAAG;AAAA,MACV,OAAS;AACLA,sBAAAA,MAAY,MAAA,OAAA,iBAAA,OAAO;AAAA,MACpB;AAAA,IACH;;;;;;AChDO,SAAS,YAAY;AAC1B,QAAM,MAAMG,cAAY,aAACC,SAAG;AAC5B,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}