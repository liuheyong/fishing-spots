{"version":3,"file":"my.js","sources":["pages/my/my.vue","pages/my/my.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 用户信息卡片 -->\n    <view class=\"user-card\">\n      <view class=\"user-header\">\n        <image \n          :src=\"userInfo.avatar || '/static/default-avatar.png'\" \n          class=\"user-avatar\"\n          mode=\"aspectFill\"\n        ></image>\n        <view class=\"user-info\">\n          <view class=\"user-name\">{{ userInfo.nickname || '未设置昵称' }}</view>\n          <view class=\"user-phone\">{{ maskedPhone }}</view>\n        </view>\n        <view class=\"edit-icon\" @click=\"goToEdit\">\n          <uni-icons type=\"compose\" size=\"20\" color=\"#3cc51f\"></uni-icons>\n          <text class=\"edit-text\">修改信息</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 统计信息 -->\n    <view class=\"stats-card\">\n      <view class=\"stats-item\">\n        <view class=\"stats-number\">{{ userStats.spotCount }}</view>\n        <view class=\"stats-label\">钓点数量</view>\n      </view>\n      <view class=\"stats-divider\"></view>\n      <view class=\"stats-item\">\n        <view class=\"stats-number\">{{ userStats.favoriteCount }}</view>\n        <view class=\"stats-label\">收藏钓点</view>\n      </view>\n      <view class=\"stats-divider\"></view>\n      <view class=\"stats-item\">\n        <view class=\"stats-number\">{{ userStats.visitCount }}</view>\n        <view class=\"stats-label\">访问次数</view>\n      </view>\n    </view>\n\n    <!-- 功能菜单 -->\n    <view class=\"menu-card\">\n      <uni-list>\n        <uni-list-item \n          title=\"我的钓点\" \n          :show-arrow=\"true\"\n          clickable\n          @click=\"goToMySpots\"\n        >\n          <template v-slot:header>\n            <view class=\"menu-icon\">\n              <uni-icons type=\"location-filled\" size=\"22\" color=\"#3cc51f\"></uni-icons>\n            </view>\n          </template>\n        </uni-list-item>\n        \n        <uni-list-item \n          title=\"收藏钓点\" \n          :show-arrow=\"true\"\n          clickable\n          @click=\"goToFavorites\"\n        >\n          <template v-slot:header>\n            <view class=\"menu-icon\">\n              <uni-icons type=\"star-filled\" size=\"22\" color=\"#ff9500\"></uni-icons>\n            </view>\n          </template>\n        </uni-list-item>\n\n        <uni-list-item \n          title=\"历史记录\" \n          :show-arrow=\"true\"\n          clickable\n          @click=\"goToHistory\"\n        >\n          <template v-slot:header>\n            <view class=\"menu-icon\">\n              <uni-icons type=\"clock-filled\" size=\"22\" color=\"#007aff\"></uni-icons>\n            </view>\n          </template>\n        </uni-list-item>\n      </uni-list>\n    </view>\n\n    <!-- 设置菜单 -->\n    <view class=\"menu-card\">\n      <uni-list>\n        <uni-list-item \n          title=\"设置\" \n          :show-arrow=\"true\"\n          clickable\n          @click=\"goToSettings\"\n        >\n          <template v-slot:header>\n            <view class=\"menu-icon\">\n              <uni-icons type=\"gear-filled\" size=\"22\" color=\"#8e8e93\"></uni-icons>\n            </view>\n          </template>\n        </uni-list-item>\n\n        <uni-list-item \n          title=\"关于我们\" \n          :show-arrow=\"true\"\n          clickable\n          @click=\"goToAbout\"\n        >\n          <template v-slot:header>\n            <view class=\"menu-icon\">\n              <uni-icons type=\"info-filled\" size=\"22\" color=\"#5ac8fa\"></uni-icons>\n            </view>\n          </template>\n        </uni-list-item>\n      </uni-list>\n    </view>\n\n    <!-- 退出登录按钮 -->\n    <view class=\"logout-wrapper\">\n      <button class=\"logout-btn\" @click=\"handleLogout\">退出登录</button>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { onShow } from '@dcloudio/uni-app'\n\n// 响应式数据\nconst userInfo = ref({\n  avatar: '',\n  nickname: '',\n  phone: ''\n})\n\nconst userStats = ref({\n  spotCount: 0,\n  favoriteCount: 0,\n  visitCount: 0\n})\n\n// 计算属性 - 脱敏手机号\nconst maskedPhone = computed(() => {\n  if (!userInfo.value.phone) return '未绑定手机号'\n  const phone = userInfo.value.phone\n  return phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2')\n})\n\n// 页面显示时\nonShow(() => {\n  loadUserInfo()\n  loadUserStats()\n})\n\n// 页面挂载时\nonMounted(() => {\n  // 可以在这里执行其他初始化操作\n})\n\n/**\n * 加载用户信息\n */\nconst loadUserInfo = async () => {\n  try {\n    // 首先从本地缓存获取用户信息\n    const cachedUserInfo = uni.getStorageSync('userInfo')\n    if (cachedUserInfo) {\n      userInfo.value = cachedUserInfo\n      console.log('从缓存加载用户信息:', cachedUserInfo)\n    }\n    \n    // 然后从服务器获取最新信息（可选）\n    // 模拟API请求 - 实际项目中替换为真实API\n    const response = await mockGetUserInfo()\n\n    if (response.success) {\n      // 合并服务器返回的信息\n      userInfo.value = {\n        ...userInfo.value,\n        ...response.data\n      }\n      // 更新缓存\n      uni.setStorageSync('userInfo', userInfo.value)\n    } else {\n      uni.showToast({\n        title: response.message || '加载失败',\n        icon: 'none'\n      })\n    }\n  } catch (error) {\n    console.error('加载用户信息失败:', error)\n  }\n}\n\n/**\n * 加载用户统计信息\n */\nconst loadUserStats = async () => {\n  try {\n    // 模拟API请求 - 实际项目中替换为真实API\n    const response = await mockGetUserStats()\n\n    if (response.success) {\n      userStats.value = response.data\n    }\n  } catch (error) {\n    console.error('加载统计信息失败:', error)\n  }\n}\n\n/**\n * 跳转到编辑信息页\n */\nconst goToEdit = () => {\n  uni.navigateTo({\n    url: '/pages/editInfo/editInfo'\n  })\n}\n\n/**\n * 跳转到我的钓点\n */\nconst goToMySpots = () => {\n  uni.showToast({\n    title: '功能开发中',\n    icon: 'none'\n  })\n}\n\n/**\n * 跳转到收藏钓点\n */\nconst goToFavorites = () => {\n  uni.showToast({\n    title: '功能开发中',\n    icon: 'none'\n  })\n}\n\n/**\n * 跳转到历史记录\n */\nconst goToHistory = () => {\n  uni.showToast({\n    title: '功能开发中',\n    icon: 'none'\n  })\n}\n\n/**\n * 跳转到设置\n */\nconst goToSettings = () => {\n  uni.showToast({\n    title: '功能开发中',\n    icon: 'none'\n  })\n}\n\n/**\n * 跳转到关于我们\n */\nconst goToAbout = () => {\n  uni.showToast({\n    title: '功能开发中',\n    icon: 'none'\n  })\n}\n\n/**\n * 退出登录\n */\nconst handleLogout = () => {\n  uni.showModal({\n    title: '提示',\n    content: '确定要退出登录吗？',\n    success: (res) => {\n      if (res.confirm) {\n        // 清除本地存储的用户信息\n        uni.removeStorageSync('userInfo')\n        uni.removeStorageSync('token')\n        \n        uni.showToast({\n          title: '已退出登录',\n          icon: 'success',\n          duration: 1500\n        })\n\n        // 延迟后退出小程序或重启应用\n        setTimeout(() => {\n          // 方式1：退出小程序\n          uni.exitMiniProgram()\n          \n          // 方式2：重新加载应用（会触发登录检查）\n          // uni.reLaunch({\n          //   url: '/pages/spotList/spotList'\n          // })\n        }, 1500)\n      }\n    }\n  })\n}\n\n/**\n * 模拟API请求 - 获取用户信息\n */\nconst mockGetUserInfo = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        success: true,\n        data: {\n          avatar: 'https://via.placeholder.com/200',\n          nickname: '钓鱼爱好者',\n          phone: '13812345678'\n        }\n      })\n    }, 300)\n  })\n}\n\n/**\n * 模拟API请求 - 获取用户统计信息\n */\nconst mockGetUserStats = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        success: true,\n        data: {\n          spotCount: 12,\n          favoriteCount: 8,\n          visitCount: 156\n        }\n      })\n    }, 300)\n  })\n}\n</script>\n\n<style scoped>\n.container {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding-bottom: 30rpx;\n}\n\n.user-card {\n  background: linear-gradient(135deg, #3cc51f 0%, #2fb015 100%);\n  padding: 40rpx 30rpx;\n  margin-bottom: 20rpx;\n}\n\n.user-header {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.user-avatar {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 60rpx;\n  border: 4rpx solid rgba(255, 255, 255, 0.3);\n  flex-shrink: 0;\n}\n\n.user-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 10rpx;\n}\n\n.user-name {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #fff;\n}\n\n.user-phone {\n  font-size: 26rpx;\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.edit-icon {\n  display: flex;\n  align-items: center;\n  gap: 5rpx;\n  padding: 10rpx 20rpx;\n  background-color: rgba(255, 255, 255, 0.9);\n  border-radius: 20rpx;\n  flex-shrink: 0;\n}\n\n.edit-text {\n  font-size: 24rpx;\n  color: #3cc51f;\n}\n\n.stats-card {\n  background-color: #fff;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n}\n\n.stats-item {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10rpx;\n}\n\n.stats-number {\n  font-size: 40rpx;\n  font-weight: 600;\n  color: #3cc51f;\n}\n\n.stats-label {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.stats-divider {\n  width: 1rpx;\n  height: 60rpx;\n  background-color: #f0f0f0;\n}\n\n.menu-card {\n  background-color: #fff;\n  margin-bottom: 20rpx;\n}\n\n.menu-icon {\n  width: 44rpx;\n  height: 44rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.logout-wrapper {\n  padding: 0 30rpx;\n  margin-top: 40rpx;\n}\n\n.logout-btn {\n  width: 100%;\n  height: 80rpx;\n  background-color: #fff;\n  color: #ff5a5f;\n  font-size: 28rpx;\n  border-radius: 40rpx;\n  border: 1rpx solid #ff5a5f;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.logout-btn::after {\n  border: none;\n}\n</style>\n","import MiniProgramPage from '/Users/wenyixi/other-workspace/miniprograms/fishing-spots/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onShow","onMounted","uni"],"mappings":"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"}