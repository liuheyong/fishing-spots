{"version":3,"file":"editInfo.js","sources":["pages/editInfo/editInfo.vue","pages/editInfo/editInfo.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 头像上传 -->\n    <view class=\"form-section\">\n      <view class=\"section-title\">头像</view>\n      <view class=\"avatar-upload\">\n        <image \n          :src=\"formData.avatar || '/static/default-avatar.png'\" \n          class=\"avatar-preview\"\n          mode=\"aspectFill\"\n          @click=\"chooseAvatar\"\n        ></image>\n        <view class=\"upload-tip\" @click=\"chooseAvatar\">\n          <uni-icons type=\"camera\" size=\"20\" color=\"#999\"></uni-icons>\n          <text class=\"tip-text\">点击更换头像</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 昵称输入 -->\n    <view class=\"form-section\">\n      <view class=\"section-title\">\n        <text>昵称</text>\n        <text class=\"required\">*</text>\n      </view>\n      <view class=\"input-wrapper\">\n        <input \n          v-model=\"formData.nickname\" \n          class=\"form-input\"\n          placeholder=\"请输入昵称\"\n          maxlength=\"20\"\n          @blur=\"validateNickname\"\n        />\n      </view>\n      <view v-if=\"errors.nickname\" class=\"error-text\">{{ errors.nickname }}</view>\n    </view>\n\n    <!-- 手机号输入 -->\n    <view class=\"form-section\">\n      <view class=\"section-title\">\n        <text>手机号</text>\n        <text class=\"required\">*</text>\n      </view>\n      <view class=\"input-wrapper\">\n        <input \n          v-model=\"formData.phone\" \n          class=\"form-input\"\n          placeholder=\"请输入手机号\"\n          type=\"number\"\n          maxlength=\"11\"\n          @blur=\"validatePhone\"\n        />\n      </view>\n      <view v-if=\"errors.phone\" class=\"error-text\">{{ errors.phone }}</view>\n    </view>\n\n    <!-- 性别选择 -->\n    <view class=\"form-section\">\n      <view class=\"section-title\">性别</view>\n      <view class=\"radio-group\">\n        <label class=\"radio-item\" @click=\"formData.gender = 'male'\">\n          <view class=\"radio-wrapper\">\n            <view :class=\"['radio', formData.gender === 'male' ? 'radio-checked' : '']\">\n              <view v-if=\"formData.gender === 'male'\" class=\"radio-dot\"></view>\n            </view>\n            <text class=\"radio-label\">男</text>\n          </view>\n        </label>\n        <label class=\"radio-item\" @click=\"formData.gender = 'female'\">\n          <view class=\"radio-wrapper\">\n            <view :class=\"['radio', formData.gender === 'female' ? 'radio-checked' : '']\">\n              <view v-if=\"formData.gender === 'female'\" class=\"radio-dot\"></view>\n            </view>\n            <text class=\"radio-label\">女</text>\n          </view>\n        </label>\n      </view>\n    </view>\n\n    <!-- 个人简介 -->\n    <view class=\"form-section\">\n      <view class=\"section-title\">个人简介</view>\n      <view class=\"textarea-wrapper\">\n        <textarea \n          v-model=\"formData.bio\" \n          class=\"form-textarea\"\n          placeholder=\"介绍一下自己吧...\"\n          maxlength=\"200\"\n          :show-confirm-bar=\"false\"\n        ></textarea>\n        <view class=\"textarea-counter\">{{ formData.bio.length }}/200</view>\n      </view>\n    </view>\n\n    <!-- 保存按钮 -->\n    <view class=\"button-wrapper\">\n      <button class=\"save-btn\" @click=\"handleSubmit\" :disabled=\"submitting\">\n        {{ submitting ? '保存中...' : '保存' }}\n      </button>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\n\n// 表单数据\nconst formData = reactive({\n  avatar: '',\n  nickname: '',\n  phone: '',\n  gender: 'male',\n  bio: ''\n})\n\n// 错误信息\nconst errors = reactive({\n  nickname: '',\n  phone: ''\n})\n\n// 提交状态\nconst submitting = ref(false)\n\n// 页面加载时\nonLoad(() => {\n  loadUserInfo()\n})\n\n/**\n * 加载用户信息\n */\nconst loadUserInfo = async () => {\n  uni.showLoading({\n    title: '加载中...'\n  })\n\n  try {\n    // 模拟API请求 - 实际项目中替换为真实API\n    const response = await mockGetUserInfo()\n\n    if (response.success) {\n      Object.assign(formData, response.data)\n    } else {\n      uni.showToast({\n        title: response.message || '加载失败',\n        icon: 'none'\n      })\n    }\n  } catch (error) {\n    console.error('加载用户信息失败:', error)\n  } finally {\n    uni.hideLoading()\n  }\n}\n\n/**\n * 选择头像\n */\nconst chooseAvatar = () => {\n  uni.chooseImage({\n    count: 1,\n    sizeType: ['compressed'],\n    sourceType: ['album', 'camera'],\n    success: (res) => {\n      const tempFilePath = res.tempFilePaths[0]\n      \n      // 显示上传进度\n      uni.showLoading({\n        title: '上传中...'\n      })\n\n      // 模拟上传 - 实际项目中替换为真实上传\n      setTimeout(() => {\n        formData.avatar = tempFilePath\n        uni.hideLoading()\n        uni.showToast({\n          title: '头像上传成功',\n          icon: 'success'\n        })\n      }, 1000)\n\n      // 实际上传代码示例：\n      // uni.uploadFile({\n      //   url: 'your-upload-api',\n      //   filePath: tempFilePath,\n      //   name: 'avatar',\n      //   success: (uploadRes) => {\n      //     const data = JSON.parse(uploadRes.data)\n      //     if (data.success) {\n      //       formData.avatar = data.url\n      //       uni.showToast({\n      //         title: '头像上传成功',\n      //         icon: 'success'\n      //       })\n      //     }\n      //   },\n      //   complete: () => {\n      //     uni.hideLoading()\n      //   }\n      // })\n    }\n  })\n}\n\n/**\n * 验证昵称\n */\nconst validateNickname = () => {\n  if (!formData.nickname.trim()) {\n    errors.nickname = '昵称不能为空'\n    return false\n  }\n  if (formData.nickname.length < 2) {\n    errors.nickname = '昵称至少2个字符'\n    return false\n  }\n  errors.nickname = ''\n  return true\n}\n\n/**\n * 验证手机号\n */\nconst validatePhone = () => {\n  const phoneRegex = /^1[3-9]\\d{9}$/\n  \n  if (!formData.phone) {\n    errors.phone = '手机号不能为空'\n    return false\n  }\n  if (!phoneRegex.test(formData.phone)) {\n    errors.phone = '请输入正确的手机号'\n    return false\n  }\n  errors.phone = ''\n  return true\n}\n\n/**\n * 验证表单\n */\nconst validateForm = () => {\n  const isNicknameValid = validateNickname()\n  const isPhoneValid = validatePhone()\n  \n  return isNicknameValid && isPhoneValid\n}\n\n/**\n * 提交表单\n */\nconst handleSubmit = async () => {\n  // 验证表单\n  if (!validateForm()) {\n    uni.showToast({\n      title: '请检查表单信息',\n      icon: 'none'\n    })\n    return\n  }\n\n  submitting.value = true\n\n  try {\n    // 模拟API请求 - 实际项目中替换为真实API\n    const response = await mockUpdateUserInfo(formData)\n\n    if (response.success) {\n      uni.showToast({\n        title: '保存成功',\n        icon: 'success'\n      })\n\n      // 延迟返回上一页\n      setTimeout(() => {\n        uni.navigateBack()\n      }, 1500)\n    } else {\n      uni.showToast({\n        title: response.message || '保存失败',\n        icon: 'none'\n      })\n    }\n  } catch (error) {\n    console.error('保存用户信息失败:', error)\n    uni.showToast({\n      title: '网络错误',\n      icon: 'none'\n    })\n  } finally {\n    submitting.value = false\n  }\n}\n\n/**\n * 模拟API请求 - 获取用户信息\n */\nconst mockGetUserInfo = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        success: true,\n        data: {\n          avatar: 'https://via.placeholder.com/200',\n          nickname: '钓鱼爱好者',\n          phone: '13812345678',\n          gender: 'male',\n          bio: '热爱钓鱼，享受宁静的时光。'\n        }\n      })\n    }, 500)\n  })\n}\n\n/**\n * 模拟API请求 - 更新用户信息\n */\nconst mockUpdateUserInfo = (data) => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      console.log('更新用户信息:', data)\n      resolve({\n        success: true,\n        message: '保存成功'\n      })\n    }, 1000)\n  })\n}\n</script>\n\n<style scoped>\n.container {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding-bottom: 30rpx;\n}\n\n.form-section {\n  background-color: #fff;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n}\n\n.section-title {\n  font-size: 28rpx;\n  color: #333;\n  font-weight: 600;\n  margin-bottom: 20rpx;\n}\n\n.required {\n  color: #ff5a5f;\n  margin-left: 5rpx;\n}\n\n.avatar-upload {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20rpx;\n  padding: 20rpx 0;\n}\n\n.avatar-preview {\n  width: 160rpx;\n  height: 160rpx;\n  border-radius: 80rpx;\n  border: 2rpx solid #f0f0f0;\n}\n\n.upload-tip {\n  display: flex;\n  align-items: center;\n  gap: 10rpx;\n}\n\n.tip-text {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.input-wrapper {\n  background-color: #f5f5f5;\n  border-radius: 8rpx;\n  overflow: hidden;\n}\n\n.form-input {\n  width: 100%;\n  height: 80rpx;\n  padding: 0 20rpx;\n  font-size: 28rpx;\n  color: #333;\n  background-color: transparent;\n}\n\n.error-text {\n  font-size: 24rpx;\n  color: #ff5a5f;\n  margin-top: 10rpx;\n}\n\n.radio-group {\n  display: flex;\n  gap: 60rpx;\n}\n\n.radio-item {\n  flex: 1;\n}\n\n.radio-wrapper {\n  display: flex;\n  align-items: center;\n  gap: 15rpx;\n  padding: 15rpx 0;\n}\n\n.radio {\n  width: 36rpx;\n  height: 36rpx;\n  border: 2rpx solid #ddd;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s;\n}\n\n.radio-checked {\n  border-color: #3cc51f;\n}\n\n.radio-dot {\n  width: 20rpx;\n  height: 20rpx;\n  background-color: #3cc51f;\n  border-radius: 50%;\n}\n\n.radio-label {\n  font-size: 28rpx;\n  color: #333;\n}\n\n.textarea-wrapper {\n  position: relative;\n  background-color: #f5f5f5;\n  border-radius: 8rpx;\n  overflow: hidden;\n}\n\n.form-textarea {\n  width: 100%;\n  min-height: 200rpx;\n  padding: 20rpx;\n  font-size: 28rpx;\n  color: #333;\n  background-color: transparent;\n  box-sizing: border-box;\n}\n\n.textarea-counter {\n  position: absolute;\n  right: 20rpx;\n  bottom: 15rpx;\n  font-size: 24rpx;\n  color: #999;\n}\n\n.button-wrapper {\n  padding: 40rpx 30rpx;\n}\n\n.save-btn {\n  width: 100%;\n  height: 80rpx;\n  background: linear-gradient(135deg, #3cc51f 0%, #2fb015 100%);\n  color: #fff;\n  font-size: 32rpx;\n  font-weight: 600;\n  border-radius: 40rpx;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.save-btn:disabled {\n  opacity: 0.6;\n}\n\n.save-btn::after {\n  border: none;\n}\n</style>\n","import MiniProgramPage from '/Users/wenyixi/other-workspace/miniprograms/fishing-spots/pages/editInfo/editInfo.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","onLoad","uni"],"mappings":"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"}