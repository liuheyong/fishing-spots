{"version":3,"file":"spotDetail.js","sources":["pages/spotDetail/spotDetail.vue","pages/spotDetail/spotDetail.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 图片轮播 -->\n    <view class=\"swiper-wrapper\">\n      <swiper \n        class=\"swiper\" \n        :indicator-dots=\"images.length > 1\" \n        :autoplay=\"true\" \n        :interval=\"3000\"\n        :circular=\"true\"\n      >\n        <swiper-item v-for=\"(image, index) in images\" :key=\"index\">\n          <image \n            :src=\"image\" \n            class=\"swiper-image\" \n            mode=\"aspectFill\"\n            @click=\"previewImage(index)\"\n          ></image>\n        </swiper-item>\n      </swiper>\n    </view>\n\n    <!-- 基本信息 -->\n    <view class=\"info-card\">\n      <view class=\"spot-title\">{{ spotInfo.name }}</view>\n      <view class=\"spot-meta\">\n        <view class=\"meta-item\">\n          <uni-tag \n            :text=\"spotInfo.type === 'wild' ? '野河' : '黑坑'\" \n            :type=\"spotInfo.type === 'wild' ? 'success' : 'primary'\"\n          ></uni-tag>\n        </view>\n        <view class=\"meta-item\">\n          <uni-icons type=\"calendar\" size=\"16\" color=\"#999\"></uni-icons>\n          <text class=\"meta-text\">{{ formatDate(spotInfo.createTime) }}</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 详细信息 -->\n    <view class=\"detail-card\">\n      <view class=\"card-title\">\n        <uni-icons type=\"info\" size=\"18\" color=\"#3cc51f\"></uni-icons>\n        <text class=\"title-text\">详细信息</text>\n      </view>\n      <view class=\"detail-item\">\n        <text class=\"detail-label\">钓点名称</text>\n        <text class=\"detail-value\">{{ spotInfo.name }}</text>\n      </view>\n      <view class=\"detail-item\">\n        <text class=\"detail-label\">钓点类型</text>\n        <text class=\"detail-value\">{{ spotInfo.type === 'wild' ? '野河' : '黑坑' }}</text>\n      </view>\n      <view class=\"detail-item\">\n        <text class=\"detail-label\">创建时间</text>\n        <text class=\"detail-value\">{{ formatDateTime(spotInfo.createTime) }}</text>\n      </view>\n      <view class=\"detail-item\">\n        <text class=\"detail-label\">地理位置</text>\n        <text class=\"detail-value\">{{ spotInfo.location || '暂未标记' }}</text>\n      </view>\n      <view class=\"detail-item\">\n        <text class=\"detail-label\">联系电话</text>\n        <text class=\"detail-value\">{{ spotInfo.phone || '暂无' }}</text>\n      </view>\n    </view>\n\n    <!-- 钓点描述 -->\n    <view class=\"detail-card\" v-if=\"spotInfo.description\">\n      <view class=\"card-title\">\n        <uni-icons type=\"compose\" size=\"18\" color=\"#3cc51f\"></uni-icons>\n        <text class=\"title-text\">钓点描述</text>\n      </view>\n      <view class=\"description-text\">\n        {{ spotInfo.description }}\n      </view>\n    </view>\n\n    <!-- 操作按钮 -->\n    <view class=\"action-bar\">\n      <button class=\"action-btn edit-btn\" @click=\"handleEdit\">\n        <uni-icons type=\"compose\" size=\"20\" color=\"#fff\"></uni-icons>\n        <text class=\"btn-text\">编辑</text>\n      </button>\n      <button class=\"action-btn delete-btn\" @click=\"handleDelete\">\n        <uni-icons type=\"trash\" size=\"20\" color=\"#fff\"></uni-icons>\n        <text class=\"btn-text\">删除</text>\n      </button>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\n\n// 响应式数据\nconst spotId = ref('') // 钓点ID\nconst spotInfo = ref({}) // 钓点信息\nconst images = ref([]) // 钓点图片列表\n\n// 页面加载时\nonLoad((options) => {\n  if (options.id) {\n    spotId.value = options.id\n    loadSpotDetail()\n  } else {\n    uni.showToast({\n      title: '参数错误',\n      icon: 'none'\n    })\n    setTimeout(() => {\n      uni.navigateBack()\n    }, 1500)\n  }\n})\n\n/**\n * 加载钓点详情\n */\nconst loadSpotDetail = async () => {\n  uni.showLoading({\n    title: '加载中...'\n  })\n\n  try {\n    // 模拟API请求 - 实际项目中替换为真实API\n    const response = await mockGetSpotDetail(spotId.value)\n\n    if (response.success) {\n      spotInfo.value = response.data\n      // 处理图片列表\n      if (response.data.images && response.data.images.length > 0) {\n        images.value = response.data.images\n      } else if (response.data.imageUrl) {\n        images.value = [response.data.imageUrl]\n      } else {\n        images.value = ['/static/default-spot.png']\n      }\n    } else {\n      uni.showToast({\n        title: response.message || '加载失败',\n        icon: 'none'\n      })\n    }\n  } catch (error) {\n    console.error('加载钓点详情失败:', error)\n    uni.showToast({\n      title: '网络错误',\n      icon: 'none'\n    })\n  } finally {\n    uni.hideLoading()\n  }\n}\n\n/**\n * 预览图片\n */\nconst previewImage = (index) => {\n  uni.previewImage({\n    urls: images.value,\n    current: index\n  })\n}\n\n/**\n * 编辑钓点\n */\nconst handleEdit = () => {\n  uni.navigateTo({\n    url: `/pages/addSpot/addSpot?id=${spotId.value}`\n  })\n}\n\n/**\n * 删除钓点\n */\nconst handleDelete = () => {\n  uni.showModal({\n    title: '提示',\n    content: '确定要删除这个钓点吗？',\n    success: async (res) => {\n      if (res.confirm) {\n        try {\n          // 模拟API请求 - 实际项目中替换为真实API\n          const response = await mockDeleteSpot(spotId.value)\n\n          if (response.success) {\n            uni.showToast({\n              title: '删除成功',\n              icon: 'success'\n            })\n            setTimeout(() => {\n              uni.navigateBack()\n            }, 1500)\n          } else {\n            uni.showToast({\n              title: response.message || '删除失败',\n              icon: 'none'\n            })\n          }\n        } catch (error) {\n          console.error('删除钓点失败:', error)\n          uni.showToast({\n            title: '网络错误',\n            icon: 'none'\n          })\n        }\n      }\n    }\n  })\n}\n\n/**\n * 格式化日期（简单格式）\n */\nconst formatDate = (dateString) => {\n  if (!dateString) return ''\n  const date = new Date(dateString)\n  const year = date.getFullYear()\n  const month = String(date.getMonth() + 1).padStart(2, '0')\n  const day = String(date.getDate()).padStart(2, '0')\n  return `${year}-${month}-${day}`\n}\n\n/**\n * 格式化日期时间（完整格式）\n */\nconst formatDateTime = (dateString) => {\n  if (!dateString) return ''\n  const date = new Date(dateString)\n  const year = date.getFullYear()\n  const month = String(date.getMonth() + 1).padStart(2, '0')\n  const day = String(date.getDate()).padStart(2, '0')\n  const hours = String(date.getHours()).padStart(2, '0')\n  const minutes = String(date.getMinutes()).padStart(2, '0')\n  return `${year}-${month}-${day} ${hours}:${minutes}`\n}\n\n/**\n * 模拟API请求 - 获取钓点详情\n */\nconst mockGetSpotDetail = (id) => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        success: true,\n        data: {\n          id: id,\n          name: `钓点${id}`,\n          type: parseInt(id) % 2 === 0 ? 'wild' : 'black',\n          imageUrl: 'https://via.placeholder.com/600x400',\n          images: [\n            'https://via.placeholder.com/600x400/3cc51f',\n            'https://via.placeholder.com/600x400/2fb015',\n            'https://via.placeholder.com/600x400/1a8a0f'\n          ],\n          location: '北京市朝阳区某某湖',\n          phone: '13800138000',\n          description: '这是一个不错的钓点，水质清澈，鱼类丰富，适合休闲垂钓。周边环境优美，交通便利，是周末休闲的好去处。',\n          createTime: new Date().toISOString()\n        }\n      })\n    }, 500)\n  })\n}\n\n/**\n * 模拟API请求 - 删除钓点\n */\nconst mockDeleteSpot = (id) => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        success: true,\n        message: '删除成功'\n      })\n    }, 500)\n  })\n}\n</script>\n\n<style scoped>\n.container {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  padding-bottom: 120rpx;\n}\n\n.swiper-wrapper {\n  width: 100%;\n  height: 500rpx;\n  background-color: #000;\n}\n\n.swiper {\n  width: 100%;\n  height: 100%;\n}\n\n.swiper-image {\n  width: 100%;\n  height: 100%;\n}\n\n.info-card {\n  background-color: #fff;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n}\n\n.spot-title {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 20rpx;\n}\n\n.spot-meta {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 20rpx;\n}\n\n.meta-item {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n}\n\n.meta-text {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.detail-card {\n  background-color: #fff;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n}\n\n.card-title {\n  display: flex;\n  align-items: center;\n  gap: 10rpx;\n  margin-bottom: 25rpx;\n  padding-bottom: 15rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n\n.title-text {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #333;\n}\n\n.detail-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 0;\n  border-bottom: 1rpx solid #f5f5f5;\n}\n\n.detail-item:last-child {\n  border-bottom: none;\n}\n\n.detail-label {\n  font-size: 28rpx;\n  color: #666;\n  flex-shrink: 0;\n}\n\n.detail-value {\n  font-size: 28rpx;\n  color: #333;\n  text-align: right;\n  flex: 1;\n  margin-left: 20rpx;\n}\n\n.description-text {\n  font-size: 28rpx;\n  color: #666;\n  line-height: 1.8;\n  text-align: justify;\n}\n\n.action-bar {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  background-color: #fff;\n  padding: 20rpx;\n  box-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\n  gap: 20rpx;\n}\n\n.action-btn {\n  flex: 1;\n  height: 80rpx;\n  border-radius: 40rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10rpx;\n  font-size: 28rpx;\n  border: none;\n}\n\n.edit-btn {\n  background: linear-gradient(135deg, #3cc51f 0%, #2fb015 100%);\n  color: #fff;\n}\n\n.delete-btn {\n  background: linear-gradient(135deg, #ff5a5f 0%, #e74c3c 100%);\n  color: #fff;\n}\n\n.btn-text {\n  font-size: 28rpx;\n  font-weight: 500;\n}\n</style>\n","import MiniProgramPage from '/Users/wenyixi/other-workspace/miniprograms/fishing-spots/pages/spotDetail/spotDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni"],"mappings":"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"}